os:
  - linux
  - osx

language: node_js

node_js:
  - 8

jobs:
  include:
    - stage: npm release
      node_js: "8"
      script: echo "Deploying to npm ..." && npm version
      deploy:
        provider: npm
        email: $NPM_EMAIL
        api_key: $NPM_TOKEN
        skip_cleanup: true
        on:
          branch: master
          tags: true
          repo: anishkny/webgif
    - stage: gh-pages
      node_js: "8"
      script: echo "Deploying to gh-pages ..."
      before_deploy: "npm run website"
      deploy:
        provider: pages
        github-token: $GITHUB_TOKEN
        local-dir: dist/
        skip_cleanup: true
        on:
          branch: master
          repo: anishkny/webgif
